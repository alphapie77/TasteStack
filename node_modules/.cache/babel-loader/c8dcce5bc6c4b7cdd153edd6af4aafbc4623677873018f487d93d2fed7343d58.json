{"ast":null,"code":"// Base API configuration\nconst API_BASE_URL = 'http://localhost:8000/api';\n\n// Helper function to get auth headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('token');\n  return token ? {\n    'Authorization': `Bearer ${token}`\n  } : {};\n};\n\n// Generic API request function\nconst apiRequest = async (endpoint, options = {}) => {\n  const url = `${API_BASE_URL}${endpoint}`;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...getAuthHeaders(),\n      ...options.headers\n    },\n    ...options\n  };\n  try {\n    const response = await fetch(url, config);\n\n    // Handle 401 Unauthorized\n    if (response.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n      throw new Error('Unauthorized');\n    }\n\n    // Handle non-OK responses\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);\n    }\n\n    // Return JSON for non-204 responses\n    if (response.status === 204) {\n      return null;\n    }\n    return await response.json();\n  } catch (error) {\n    console.error(`API request failed: ${error.message}`);\n    throw error;\n  }\n};\nexport default apiRequest;","map":{"version":3,"names":["API_BASE_URL","getAuthHeaders","token","localStorage","getItem","apiRequest","endpoint","options","url","config","headers","response","fetch","status","removeItem","window","location","href","Error","ok","errorData","json","catch","detail","error","console","message"],"sources":["c:/Users/acer/Downloads/New folder/src/services/api.js"],"sourcesContent":["// Base API configuration\r\nconst API_BASE_URL = 'http://localhost:8000/api';\r\n\r\n// Helper function to get auth headers\r\nconst getAuthHeaders = () => {\r\n  const token = localStorage.getItem('token');\r\n  return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n};\r\n\r\n// Generic API request function\r\nconst apiRequest = async (endpoint, options = {}) => {\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...getAuthHeaders(),\r\n      ...options.headers\r\n    },\r\n    ...options\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, config);\r\n    \r\n    // Handle 401 Unauthorized\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n      throw new Error('Unauthorized');\r\n    }\r\n    \r\n    // Handle non-OK responses\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    // Return JSON for non-204 responses\r\n    if (response.status === 204) {\r\n      return null;\r\n    }\r\n    \r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(`API request failed: ${error.message}`);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default apiRequest;"],"mappings":"AAAA;AACA,MAAMA,YAAY,GAAG,2BAA2B;;AAEhD;AACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC3B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,OAAOF,KAAK,GAAG;IAAE,eAAe,EAAE,UAAUA,KAAK;EAAG,CAAC,GAAG,CAAC,CAAC;AAC5D,CAAC;;AAED;AACA,MAAMG,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACnD,MAAMC,GAAG,GAAG,GAAGR,YAAY,GAAGM,QAAQ,EAAE;EACxC,MAAMG,MAAM,GAAG;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGT,cAAc,CAAC,CAAC;MACnB,GAAGM,OAAO,CAACG;IACb,CAAC;IACD,GAAGH;EACL,CAAC;EAED,IAAI;IACF,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,EAAEC,MAAM,CAAC;;IAEzC;IACA,IAAIE,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3BV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC;MAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MAC/B,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;IACjC;;IAEA;IACA,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;MACzD,MAAM,IAAIJ,KAAK,CAACE,SAAS,CAACG,MAAM,IAAI,uBAAuBZ,QAAQ,CAACE,MAAM,EAAE,CAAC;IAC/E;;IAEA;IACA,IAAIF,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3B,OAAO,IAAI;IACb;IAEA,OAAO,MAAMF,QAAQ,CAACU,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uBAAuBA,KAAK,CAACE,OAAO,EAAE,CAAC;IACrD,MAAMF,KAAK;EACb;AACF,CAAC;AAED,eAAenB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}